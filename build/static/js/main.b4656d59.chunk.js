(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,a,t){e.exports=t(68)},65:function(e,a,t){},67:function(e,a,t){},68:function(e,a,t){"use strict";t.r(a);var n,s=t(0),i=t.n(s),l=t(23),c=t.n(l),o=t(24),r=t(25),d=t(28),u=t(26),b=t(3),m=t(29),h=t(10),C=t.n(h),v=t(2),p=t.n(v),g=t(27),f=t.n(g),E=(t(64),t(65),t(66)),k=function(e,a){var t=a||window.location.href,n=new RegExp("[?&]".concat(e,"=([^&#]*)"),"i").exec(t);return n?n[1]:null};var S={credentials:{apiKey:"apiKey",sessionId:"sessionId",token:"token"},streamContainers:function(e,a,t,n){return{publisher:{camera:"#cameraPublisherContainer",screen:"#screenPublisherContainer"},subscriber:{camera:"#cameraSubscriberContainer",screen:"#screenSubscriberContainer"}}[e][a]},controlsContainer:"#controls",packages:["textChat","screenSharing","annotation"],communication:{callProperties:null},textChat:{name:"default",waitingMessage:"Messages will be delivered when other users arrive",container:"#chat"},screenSharing:{extensionID:"plocfffmbcclpdifaikiikgplfnepkpo",annotation:!0,externalWindow:!1,dev:!0,screenProperties:{insertMode:"append",width:"100%",height:"100%",showControls:!1,style:{buttonDisplayMode:"off"},videoSource:"window",fitMode:"contain"}},annotation:{absoluteParent:{publisher:".App-video-container",subscriber:".App-video-container"}}},w=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(d.a)(this,Object(u.a)(a).call(this,e))).state={connected:!1,active:!1,publishers:null,started:!0,subscribers:null,meta:null,localAudioEnabled:!0,localVideoEnabled:!0,localCam:!0},t.startCall=t.startCall.bind(Object(b.a)(t)),t.endCall=t.endCall.bind(Object(b.a)(t)),t.toggleLocalAudio=t.toggleLocalAudio.bind(Object(b.a)(t)),t.toggleLocalVideo=t.toggleLocalVideo.bind(Object(b.a)(t)),t.switchLocalCamera=t.switchLocalCamera.bind(Object(b.a)(t)),t}return Object(m.a)(a,e),Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;S.credentials.token,S.credentials.apiKey=k("apiKey"),S.credentials.sessionId=k("sessionId"),S.credentials.token=k("token"),S.textChat.name=k("name"),(n=new f.a(S)).connect().then(function(){return e.setState({connected:!0})});["subscribeToCamera","unsubscribeFromCamera","subscribeToScreen","unsubscribeFromScreen","startScreenShare","endScreenShare"].forEach(function(a){return n.on(a,function(a){var t=a.publishers,n=a.subscribers,s=a.meta;e.setState({publishers:t,subscribers:n,meta:s})})})}},{key:"startCall",value:function(){var e=this;this.setState({started:!1}),n.startCall().then(function(a){var t=a.publishers,n=a.subscribers,s=a.meta;a.started;e.setState({publishers:t,subscribers:n,meta:s,started:!1,active:!0})}).catch(function(e){return console.log(e)})}},{key:"endCall",value:function(){n.endCall(),this.setState({active:!1,started:!0})}},{key:"toggleLocalAudio",value:function(){n.toggleLocalAudio(!this.state.localAudioEnabled),this.setState({localAudioEnabled:!this.state.localAudioEnabled})}},{key:"toggleLocalVideo",value:function(){n.toggleLocalVideo(!this.state.localVideoEnabled),this.setState({localVideoEnabled:!this.state.localVideoEnabled})}},{key:"switchLocalCamera",value:function(){E.getDevices(function(e,a){if(!e)return a;console.log("getDevices error ".concat(e.message))},""),this.setState({localCam:!this.state.localCam})}},{key:"render",value:function(){var e,a=this.state,t=a.connected,n=a.active,s=a.started,l=function(e){var a=e.active,t=e.meta,n=e.localAudioEnabled,s=e.localVideoEnabled,i=e.localCam,l=!!t&&!!t.publisher.screen,c=!!t&&t.subscriber.screen,o=t?t.subscriber.camera:0,r=o>2,d=o%2,u=c||l;return{controlClass:p()("App-control-container",{hidden:!a}),localAudioClass:p()("ots-video-control circle audio",{hidden:!a,muted:!n}),localVideoClass:p()("ots-video-control circle video",{hidden:!a,muted:!s}),localCameraClass:p()("ots-video-control circle camera",{hidden:!a,front:!i}),localCallClass:p()("ots-video-control circle end-call",{hidden:!a}),cameraPublisherClass:p()("video-container",{hidden:!a,small:!!o||u,left:u}),screenPublisherClass:p()("video-container",{hidden:!a||!l}),cameraSubscriberClass:p()("video-container",{hidden:!a||!o},{"active-gt2":r&&!u},{"active-odd":d&&!u},{small:u}),screenSubscriberClass:p()("video-container",{hidden:!c||!a})}}(this.state),c=l.localAudioClass,o=l.localVideoClass,r=l.localCallClass,d=l.controlClass,u=l.cameraPublisherClass,b=l.screenPublisherClass,m=l.cameraSubscriberClass,h=l.screenSubscriberClass;return i.a.createElement("div",{className:"App"},i.a.createElement("div",{className:"App-main"},i.a.createElement("div",{className:"App-video-container"},!t&&i.a.createElement("div",{className:"App-mask"},i.a.createElement(C.a,null),i.a.createElement("div",{className:"message with-spinner"},"Connecting")),t&&!s&&!n&&i.a.createElement("div",{className:"App-mask"},i.a.createElement(C.a,null),i.a.createElement("div",{className:"message with-spinner"},"Connecting")),t&&!n&&s&&(e=this.startCall,i.a.createElement("div",{className:"App-mask"},i.a.createElement("button",{className:"message button clickable",onClick:e},"Click to Start Call"," "))),i.a.createElement("div",{id:"cameraPublisherContainer",className:u}),i.a.createElement("div",{id:"screenPublisherContainer",className:b}),i.a.createElement("div",{id:"cameraSubscriberContainer",className:m}),i.a.createElement("div",{id:"screenSubscriberContainer",className:h}),i.a.createElement("div",{id:"chat",className:"ots-text-chat"}),i.a.createElement("div",{id:"controls",className:d},i.a.createElement("div",{className:c,onClick:this.toggleLocalAudio}),i.a.createElement("div",{className:o,onClick:this.toggleLocalVideo}),i.a.createElement("div",{className:r,onClick:this.endCall})))))}}]),a}(s.Component);t(67);c.a.render(i.a.createElement(w,null),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.b4656d59.chunk.js.map